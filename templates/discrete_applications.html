<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¦»æ•£åŠ¨åŠ›å­¦å®é™…åº”ç”¨</title>
    <!-- Theme CSS -->
    <link rel="stylesheet" href="/static/css/theme.css">
    <link rel="stylesheet" href="/static/css/style.css">
    <style>
        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #333;
        }

        .tab {
            padding: 15px 30px;
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            border: none;
            color: #fff;
            cursor: pointer;
            border-radius: 10px 10px 0 0;
            font-size: 16px;
            transition: all 0.3s;
        }

        .tab:hover {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            transform: translateY(-2px);
        }

        .tab.active {
            background: linear-gradient(135deg, #00c9ff, #92fe9d);
            color: #000;
            font-weight: bold;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .control-panel {
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid #444;
        }

        .param-group {
            margin-bottom: 20px;
        }

        .param-group label {
            display: block;
            margin-bottom: 8px;
            color: #00c9ff;
            font-weight: bold;
        }

        .param-input {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .param-input input[type="number"],
        .param-input input[type="range"] {
            flex: 1;
            padding: 10px;
            background: #0a0a0a;
            border: 1px solid #444;
            border-radius: 8px;
            color: #fff;
        }

        .param-input input[type="range"] {
            -webkit-appearance: none;
            height: 8px;
            background: #333;
            outline: none;
        }

        .param-input input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #00c9ff, #92fe9d);
            cursor: pointer;
            border-radius: 50%;
        }

        .param-input span {
            min-width: 60px;
            color: #92fe9d;
            font-weight: bold;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .action-btn {
            flex: 1;
            padding: 12px 24px;
            background: linear-gradient(135deg, #00c9ff, #92fe9d);
            border: none;
            border-radius: 8px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 201, 255, 0.4);
        }

        .action-btn.secondary {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .visualization-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .chart-container {
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid #444;
            height: 450px;
            max-height: 450px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .chart-container h3 {
            color: #00c9ff;
            margin-bottom: 15px;
            text-align: center;
            flex-shrink: 0;
        }

        canvas {
            width: 100%;
            flex: 1;
            min-height: 0;
            background: #0a0a0a;
            border-radius: 10px;
        }

        .info-panel {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid #444;
        }

        .info-panel h3 {
            color: #92fe9d;
            margin-bottom: 15px;
        }

        .info-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .info-item {
            background: #0a0a0a;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #00c9ff;
        }

        .info-item strong {
            color: #00c9ff;
            display: block;
            margin-bottom: 5px;
        }

        .info-item span {
            color: #fff;
            font-size: 18px;
        }

        .description {
            background: linear-gradient(135deg, #0a0a0a, #1a1a1a);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 5px solid #92fe9d;
        }

        .description h2 {
            color: #92fe9d;
            margin-bottom: 10px;
        }

        .description p {
            color: #ccc;
            line-height: 1.6;
        }

        .equation-display {
            background: #0a0a0a;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            color: #00c9ff;
            text-align: center;
            font-size: 18px;
        }

        @media (max-width: 768px) {
            .visualization-area {
                grid-template-columns: 1fr;
            }
            .tabs {
                flex-wrap: wrap;
            }
            .tab {
                flex: 1;
                min-width: 150px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <h1 style="text-align: center; color: #00c9ff; margin-bottom: 30px;">
            ğŸ¯ ç¦»æ•£åŠ¨åŠ›å­¦å®é™…åº”ç”¨
        </h1>

        <div class="tabs">
            <button class="tab active" onclick="switchTab(event, 'population')">ğŸŸ ç§ç¾¤åŠ¨æ€</button>
            <button class="tab" onclick="switchTab(event, 'epidemic')">ğŸ¦  ä¼ æŸ“ç—…æ¨¡å‹</button>
            <button class="tab" onclick="switchTab(event, 'economy')">ğŸ’¹ ç»æµå‘¨æœŸ</button>
            <button class="tab" onclick="switchTab(event, 'predator')">ğŸ¦ æ•é£Ÿè€…æ¨¡å‹</button>
        </div>

        <!-- ç§ç¾¤åŠ¨æ€åº”ç”¨ -->
        <div id="population" class="tab-content active">
            <div class="description">
                <h2>ğŸŸ Rickerç§ç¾¤æ¨¡å‹</h2>
                <p>
                    Rickeræ¨¡å‹ç”¨äºæè¿°é±¼ç±»ç­‰ç”Ÿç‰©ç§ç¾¤çš„åŠ¨æ€å˜åŒ–ï¼Œè€ƒè™‘äº†èµ„æºç«äº‰å’Œè¿‡åº¦æ‹¥æŒ¤æ•ˆåº”ã€‚
                    æ¨¡å‹å…¬å¼ï¼š<strong>N<sub>t+1</sub> = N<sub>t</sub> Â· exp(r(1 - N<sub>t</sub>/K))</strong>
                </p>
                <p>
                    å‚æ•°è¯´æ˜ï¼šrä¸ºå†…ç¦€å¢é•¿ç‡ï¼ŒKä¸ºç¯å¢ƒæ‰¿è½½åŠ›ã€‚è¯¥æ¨¡å‹å¯ä»¥å±•ç°ä»ç¨³å®šåˆ°æ··æ²Œçš„è½¬å˜ã€‚
                </p>
            </div>

            <div class="control-panel">
                <div class="param-group">
                    <label>å†…ç¦€å¢é•¿ç‡ rï¼š</label>
                    <div class="param-input">
                        <input type="range" id="pop_r" min="0.1" max="3.5" step="0.1" value="2.0">
                        <span id="pop_r_val">2.0</span>
                    </div>
                </div>
                <div class="param-group">
                    <label>æ‰¿è½½åŠ› Kï¼š</label>
                    <div class="param-input">
                        <input type="number" id="pop_K" value="100" min="10" max="200">
                    </div>
                </div>
                <div class="param-group">
                    <label>åˆå§‹ç§ç¾¤ Nâ‚€ï¼š</label>
                    <div class="param-input">
                        <input type="number" id="pop_N0" value="10" min="1" max="150">
                    </div>
                </div>
                <div class="button-group">
                    <button class="action-btn" onclick="runPopulation()">â–¶ï¸ è¿è¡Œæ¨¡æ‹Ÿ</button>
                    <button class="action-btn secondary" onclick="bifurcationPopulation()">ğŸ“Š åˆ†å²”å›¾</button>
                </div>
            </div>

            <div class="visualization-area">
                <div class="chart-container">
                    <h3>ç§ç¾¤æ—¶é—´åºåˆ—</h3>
                    <canvas id="pop_timeseries"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ç›¸å›¾ (N<sub>t+1</sub> vs N<sub>t</sub>)</h3>
                    <canvas id="pop_phase"></canvas>
                </div>
                <div class="info-panel">
                    <h3>ğŸ“ˆ åˆ†æç»“æœ</h3>
                    <div class="info-content" id="pop_info"></div>
                </div>
            </div>
        </div>

        <!-- ä¼ æŸ“ç—…æ¨¡å‹ -->
        <div id="epidemic" class="tab-content">
            <div class="description">
                <h2>ğŸ¦  ç¦»æ•£SIRä¼ æŸ“ç—…æ¨¡å‹</h2>
                <p>
                    SIRæ¨¡å‹å°†äººç¾¤åˆ†ä¸ºæ˜“æ„Ÿè€…(S)ã€æ„ŸæŸ“è€…(I)ã€åº·å¤è€…(R)ä¸‰ç±»ï¼Œæ¨¡æ‹Ÿä¼ æŸ“ç—…ä¼ æ’­è¿‡ç¨‹ã€‚
                </p>
                <div class="equation-display">
                    S<sub>t+1</sub> = S<sub>t</sub> - Î²Â·S<sub>t</sub>Â·I<sub>t</sub><br>
                    I<sub>t+1</sub> = I<sub>t</sub> + Î²Â·S<sub>t</sub>Â·I<sub>t</sub> - Î³Â·I<sub>t</sub><br>
                    R<sub>t+1</sub> = R<sub>t</sub> + Î³Â·I<sub>t</sub>
                </div>
                <p>
                    Î²ä¸ºä¼ æŸ“ç‡ï¼ŒÎ³ä¸ºåº·å¤ç‡ã€‚åŸºæœ¬å†ç”Ÿæ•° Râ‚€ = Î²/Î³ å†³å®šç–«æƒ…æ˜¯å¦çˆ†å‘ã€‚
                </p>
            </div>

            <div class="control-panel">
                <div class="param-group">
                    <label>ä¼ æŸ“ç‡ Î²ï¼š</label>
                    <div class="param-input">
                        <input type="range" id="epi_beta" min="0.0001" max="0.001" step="0.0001" value="0.0003">
                        <span id="epi_beta_val">0.0003</span>
                    </div>
                </div>
                <div class="param-group">
                    <label>åº·å¤ç‡ Î³ï¼š</label>
                    <div class="param-input">
                        <input type="range" id="epi_gamma" min="0.01" max="0.3" step="0.01" value="0.1">
                        <span id="epi_gamma_val">0.1</span>
                    </div>
                </div>
                <div class="param-group">
                    <label>æ€»äººå£ï¼š</label>
                    <div class="param-input">
                        <input type="number" id="epi_N" value="1000" min="100" max="10000">
                    </div>
                </div>
                <div class="param-group">
                    <label>åˆå§‹æ„ŸæŸ“è€…ï¼š</label>
                    <div class="param-input">
                        <input type="number" id="epi_I0" value="10" min="1" max="100">
                    </div>
                </div>
                <div class="button-group">
                    <button class="action-btn" onclick="runEpidemic()">â–¶ï¸ è¿è¡Œæ¨¡æ‹Ÿ</button>
                    <button class="action-btn secondary" onclick="varyParameters()">ğŸ”¬ å‚æ•°æ‰«æ</button>
                </div>
            </div>

            <div class="visualization-area">
                <div class="chart-container">
                    <h3>S-I-Ræ—¶é—´æ¼”åŒ–</h3>
                    <canvas id="epi_timeseries"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ç›¸ç©ºé—´è½¨è¿¹</h3>
                    <canvas id="epi_phase"></canvas>
                </div>
                <div class="info-panel">
                    <h3>ğŸ“Š ç–«æƒ…æŒ‡æ ‡</h3>
                    <div class="info-content" id="epi_info"></div>
                </div>
            </div>
        </div>

        <!-- ç»æµå‘¨æœŸæ¨¡å‹ -->
        <div id="economy" class="tab-content">
            <div class="description">
                <h2>ğŸ’¹ è››ç½‘æ¨¡å‹ï¼ˆä¾›éœ€åŠ¨æ€ï¼‰</h2>
                <p>
                    è››ç½‘æ¨¡å‹æè¿°å•†å“ä»·æ ¼å’Œäº§é‡çš„åŠ¨æ€è°ƒæ•´è¿‡ç¨‹ã€‚ç”Ÿäº§è€…æ ¹æ®å½“å‰ä»·æ ¼å†³å®šä¸‹æœŸäº§é‡ï¼Œ
                    è€Œä»·æ ¼ç”±å½“æœŸäº§é‡å’Œéœ€æ±‚å†³å®šã€‚
                </p>
                <div class="equation-display">
                    Q<sub>s,t</sub> = Î± + Î²Â·P<sub>t-1</sub> ï¼ˆä¾›ç»™æ–¹ç¨‹ï¼‰<br>
                    Q<sub>d,t</sub> = Î³ - Î´Â·P<sub>t</sub> ï¼ˆéœ€æ±‚æ–¹ç¨‹ï¼‰<br>
                    å‡è¡¡ï¼šQ<sub>s,t</sub> = Q<sub>d,t</sub>
                </div>
            </div>

            <div class="control-panel">
                <div class="param-group">
                    <label>ä¾›ç»™æ–œç‡ Î²ï¼š</label>
                    <div class="param-input">
                        <input type="range" id="eco_beta" min="0.1" max="3" step="0.1" value="0.8">
                        <span id="eco_beta_val">0.8</span>
                    </div>
                </div>
                <div class="param-group">
                    <label>éœ€æ±‚æ–œç‡ Î´ï¼š</label>
                    <div class="param-input">
                        <input type="range" id="eco_delta" min="0.1" max="3" step="0.1" value="1.2">
                        <span id="eco_delta_val">1.2</span>
                    </div>
                </div>
                <div class="param-group">
                    <label>åˆå§‹ä»·æ ¼ Pâ‚€ï¼š</label>
                    <div class="param-input">
                        <input type="number" id="eco_P0" value="20" min="1" max="50">
                    </div>
                </div>
                <div class="button-group">
                    <button class="action-btn" onclick="runEconomy()">â–¶ï¸ è¿è¡Œæ¨¡æ‹Ÿ</button>
                    <button class="action-btn secondary" onclick="cobwebEconomy()">ğŸ“Š ç›¸å›¾</button>
                </div>
            </div>

            <div class="visualization-area">
                <div class="chart-container">
                    <h3>ä»·æ ¼-äº§é‡æ—¶é—´åºåˆ—</h3>
                    <canvas id="eco_timeseries"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ä»·æ ¼-äº§é‡ç›¸å›¾</h3>
                    <canvas id="eco_cobweb"></canvas>
                </div>
                <div class="info-panel">
                    <h3>ğŸ’° ç»æµæŒ‡æ ‡</h3>
                    <div class="info-content" id="eco_info"></div>
                </div>
            </div>
        </div>

        <!-- æ•é£Ÿè€…-è¢«æ•é£Ÿè€…æ¨¡å‹ -->
        <div id="predator" class="tab-content">
            <div class="description">
                <h2>ğŸ¦ ç¦»æ•£Lotka-Volterraæ¨¡å‹</h2>
                <p>
                    æè¿°æ•é£Ÿè€…å’Œè¢«æ•é£Ÿè€…ç§ç¾¤æ•°é‡çš„ç›¸äº’ä½œç”¨å’Œå‘¨æœŸæ€§å˜åŒ–ã€‚
                </p>
                <div class="equation-display">
                    x<sub>t+1</sub> = x<sub>t</sub> + rÂ·x<sub>t</sub>(1 - x<sub>t</sub>) - Î±Â·x<sub>t</sub>Â·y<sub>t</sub><br>
                    y<sub>t+1</sub> = y<sub>t</sub> + Î²Â·x<sub>t</sub>Â·y<sub>t</sub> - mÂ·y<sub>t</sub>
                </div>
                <p>
                    xä¸ºè¢«æ•é£Ÿè€…ï¼ˆçŒç‰©ï¼‰æ•°é‡ï¼Œyä¸ºæ•é£Ÿè€…æ•°é‡ã€‚rä¸ºçŒç‰©å¢é•¿ç‡ï¼ŒÎ±ä¸ºæ•é£Ÿç‡ï¼ŒÎ²ä¸ºè½¬åŒ–æ•ˆç‡ï¼Œmä¸ºæ•é£Ÿè€…æ­»äº¡ç‡ã€‚
                </p>
            </div>

            <div class="control-panel">
                <div class="param-group">
                    <label>çŒç‰©å¢é•¿ç‡ rï¼š</label>
                    <div class="param-input">
                        <input type="range" id="pred_r" min="0.1" max="2" step="0.1" value="0.5">
                        <span id="pred_r_val">0.5</span>
                    </div>
                </div>
                <div class="param-group">
                    <label>æ•é£Ÿç‡ Î±ï¼š</label>
                    <div class="param-input">
                        <input type="range" id="pred_alpha" min="0.1" max="2" step="0.1" value="0.8">
                        <span id="pred_alpha_val">0.8</span>
                    </div>
                </div>
                <div class="param-group">
                    <label>è½¬åŒ–æ•ˆç‡ Î²ï¼š</label>
                    <div class="param-input">
                        <input type="range" id="pred_beta" min="0.1" max="1.5" step="0.1" value="0.6">
                        <span id="pred_beta_val">0.6</span>
                    </div>
                </div>
                <div class="param-group">
                    <label>æ•é£Ÿè€…æ­»äº¡ç‡ mï¼š</label>
                    <div class="param-input">
                        <input type="range" id="pred_m" min="0.1" max="1" step="0.05" value="0.3">
                        <span id="pred_m_val">0.3</span>
                    </div>
                </div>
                <div class="button-group">
                    <button class="action-btn" onclick="runPredator()">â–¶ï¸ è¿è¡Œæ¨¡æ‹Ÿ</button>
                    <button class="action-btn secondary" onclick="phasePredator()">ğŸ”„ ç›¸å›¾</button>
                </div>
            </div>

            <div class="visualization-area">
                <div class="chart-container">
                    <h3>ç§ç¾¤æ•°é‡æ—¶é—´æ¼”åŒ–</h3>
                    <canvas id="pred_timeseries"></canvas>
                </div>
                <div class="chart-container">
                    <h3>æ•é£Ÿè€…-çŒç‰©ç›¸å›¾</h3>
                    <canvas id="pred_phase"></canvas>
                </div>
                <div class="info-panel">
                    <h3>ğŸŒ ç”Ÿæ€æŒ‡æ ‡</h3>
                    <div class="info-content" id="pred_info"></div>
                </div>
            </div>
        </div>

        <div style="text-align: center; margin-top: 40px; padding: 20px; background: linear-gradient(135deg, #1a1a1a, #2a2a2a); border-radius: 15px;">
            <a href="/" style="color: #00c9ff; text-decoration: none; font-size: 18px;">ğŸ  è¿”å›ä¸»é¡µ</a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="/static/js/discrete_applications.js"></script>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='js/theme-toggle.js') }}"></script>
    <script src="{{ url_for('static', filename='js/layout-horizontal.js') }}"></script>
</body>
</html>
